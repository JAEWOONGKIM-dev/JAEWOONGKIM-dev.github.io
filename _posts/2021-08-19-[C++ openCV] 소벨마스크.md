---
layout: single
title:  "[C++ openCV] 소벨 마스크를 사용한 엣지 검출"
excerpt: "소벨 마스크에 대해 알아보고 직접 구현해보자."
toc: true
toc_sticky: true
cartegories:
    - Blog
tags:
    - [Blog, openCV]
---
소벨 마스크를 알아보기 전, **'컨볼루션이(Convolution)'**라는 개념을 알아야 한다. 컨볼루션은 한국 말로는 합성곱을 나타내며, 하나의 함수와 또 다른 함수를 반전 이동한 값을 곱한 다음, 구간에 대해 적분하여 새로운 함수를 구하는 수학 연산자이다(출처: 위키백과).

## 소벨 마스크
**'소벨 마스크'**는 영상에서 경계선을 검출하는데에 있어서 사용되는 마스크 중 하나이다. 영상 이미지를 3X3에 해당하는 소벨 마스크를 사용하여 한 번 쭉 훑으면서 컨볼루션을 하고, 값이 급격히 변하는 곳을 찾아 그 부분만을 밝게 나타내는 것이다. 

컨볼루션은 다음과 같이 실행한다.
![png](/assets/images/[C++ openCV] 소벨마스크/convolution.png)
<br>
이미지에서 마스크 크기만큼 짤라서 각 픽셀값과 마스크의 각 값을 곱한 후 더한 값으로 다시 이미지를 만든다. 다시 만든 이미지는 원본 영상보다 작아지므로 제로패딩을 해주어야 한다.

우선, x방향과 y방향의 소벨 마스크 필터를 통해 컨볼루션을 해주어야 한다.

x방향 소벨 마스크(수평 마스크)
|1|2|1|
|0|0|0|
|-1|-2|-1|

y방향 소벨 마스크(수직 마스크)
|-1|0|1|
|-2|0|2|
|-1|0|1|
